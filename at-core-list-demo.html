<!-- Import Polymer -->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../at-core-list/at-core-list.html">

<polymer-element name="at-core-list-demo">
  <template>
    <style>
      :host {
        display: block;
      }

      at-core-list::shadow .item {
        box-sizing: border-box;
        height: 80px;
        padding: 4px;
        cursor: default;
        overflow: hidden;
      }

      at-core-list::shadow .message {
        padding-left: 6px;
        line-height: 167%;
        background-repeat: no-repeat;
        background-position: 10px 10px;
        background-size: 60px;
      }

      at-core-list::shadow .from {
        display: inline;
        font-weight: bold;
      }

      at-core-list::shadow .timestamp {
        margin-left: 10px;
        font-size: 12px;
        opacity: 0.8;
      }

      at-core-list::shadow .body {
        font-size: 12px;
      }
    </style>
    <at-core-list id="list" items="{{data}}" layout="grid">
      <template>
        <div class="item {{ {selected: selected} | tokenList }}">
          <div class="message">
            <span class="from">{{name}}</span>
            <span class="timestamp">{{time}}</span>
            <div class="subject">List item #{{index}}</div>
            <div class="body">{{details}}</div>
          </div>
        </div>
      </template>
    </at-core-list>

  </template>

  <script>
    (function () {
      var strings = [
        "PARKOUR!",
        "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...",
        "Lorem Ipsum is simply dummy text of the printing and typesetting industry."
      ];

      var namegen = {
        generateString: function (inLength) {
          var s = '';
          for (var i = 0; i < inLength; i++) {
            s += String.fromCharCode(Math.floor(Math.random() * 26) + 97);
          }
          return s;
        },
        generateName: function (inMin, inMax) {
          return this.generateString(Math.floor(Math.random() * (inMax - inMin + 1) + inMin));
        }
      };

      Polymer('at-core-list-demo', {
        count: 100,
        ready: function () {
          this.data = this.generateData();
        },
        viewReady: function (context) {
          context.appFrame.caption = "at-core-list Sample";
        },
        attached: function () {

        },
        generateData: function () {
          var names = [], data = [];
          for (var i = 0; i < this.count; i++) {
            names.push(namegen.generateName(4, 8));
          }
          names.sort();
          for (var i = 0; i < this.count; i++) {
            var name = names[i];
            var divider = name.charAt(0);
            if (divider === (names[i - 1] || '').charAt(0)) {
              divider = null;
            }
            data.push({
              index: i,
              name: name,
              divider: divider,
              details: strings[i % 3],
              time: '8:29pm'
            });
          }
          return data;
        },
        tapAction: function (e) {
          console.log('tap', e);
        }
      });
    })();
  </script>
</polymer-element>

